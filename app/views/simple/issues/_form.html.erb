<%= labelled_fields_for :issue, @issue do |f| %>

  <% if @issue.safe_attribute? 'subject' %>
    <p>
      <%= f.text_field :subject,
                       :maxlength => 255,
                       :required => true %>
    </p>
  <% end %>

  <% if @issue.safe_attribute? 'assigned_to_id' %>
    <p>
      <%= f.label_for_field :assigned_to_id, :required => @issue.required_attribute?('assigned_to_id') %>
      <%= text_field_tag :issue_assigned_to_id_ac, '',
                         :required => @issue.required_attribute?('assigned_to_id') %>
      <%= f.hidden_field :assigned_to_id,
                         :value => @issue.assigned_to %>
    </p>
  <% end %>

  <% if @issue.safe_attribute? 'description' %>
    <p>
      <%= f.text_area :description,
                      :no_label => true,
                      :cols => 80,
                      :rows => (@issue.description.blank? ? 10 : [[10, @issue.description.length / 50].max, 100].min),
                      :accesskey => accesskey(:edit),
                      :class => 'no-label' %>
    </p>
  <% end %>

<% end %>
